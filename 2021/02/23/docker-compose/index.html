<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta content="width=device-width,initial-scale=1,minimum-scale=1" name="viewport"><meta content="ie=edge" http-equiv="X-UA-Compatible"><meta content="#fff" name="theme-color" id="theme-color"><meta content="路遥知马力" name="description"><link href="/img/logo.jpg" rel="icon"><title>Docker Compose</title><meta content="Docker Compose" property="og:title"><meta content="https://lujw666.github.io/2021/02/23/docker-compose/index.html" property="og:url"><meta content="/2021/02/23/docker-compose/docker-compose.jpg" property="og:img"><meta content="article" property="og:type"><meta content="2021-02-23" property="og:article:published_time"><meta content="2021-02-23" property="og:article:modified_time"><meta content="Lujw" property="og:article:author"><meta content="docker" property="og:article:tag"><script>var reverseDarkList={dark:"light",light:"dark"},themeColor={dark:"#1c1c1e",light:"#fff"},getCssMediaQuery=function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},reverseDarkModeSetting=function(){var e=localStorage.getItem("user-color-scheme");if(reverseDarkList[e])e=reverseDarkList[e];else{if(null!==e)return;e=reverseDarkList[getCssMediaQuery()]}return localStorage.setItem("user-color-scheme",e),e},setDarkmode=function(e){e=e||localStorage.getItem("user-color-scheme");e===getCssMediaQuery()?(document.documentElement.removeAttribute("data-user-color-scheme"),localStorage.removeItem("user-color-scheme"),document.getElementById("theme-color").content=themeColor[e]):reverseDarkList[e]?(document.documentElement.setAttribute("data-user-color-scheme",e),document.getElementById("theme-color").content=themeColor[e]):(document.documentElement.removeAttribute("data-user-color-scheme"),localStorage.removeItem("user-color-scheme"),document.getElementById("theme-color").content=themeColor[getCssMediaQuery()])};setDarkmode()</script><script>function loadScript(c,n){var d=document.createElement("script");d.src=c,n&&(d.onload=n),d.async=!0,document.body.appendChild(d)}</script><link href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" rel="preload" as="style"><link href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" rel="preload" as="style"><link href="/js/lib/lightbox/baguetteBox.min.js" rel="preload" as="script"><link href="/js/lib/lightbox/baguetteBox.min.css" rel="preload" as="style"><link href="/js/lib/lozad.min.js" rel="preload" as="script"><link href="/css/main.css" rel="stylesheet"><link href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" rel="stylesheet"><link href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" rel="stylesheet"><link href="//at.alicdn.com/t/font_2374792_s3mjf1t926g.css" rel="stylesheet"><link href="/js/lib/lightbox/baguetteBox.min.css" rel="stylesheet"><meta content="Hexo 5.3.0" name="generator"></head><body><div class="wrapper"><nav class="navbar"><div class="navbar-logo"><span class="navbar-logo-main"><img class="navbar-logo-img" src="/img/logo.jpg" alt="logo"> <span class="navbar-logo-dsc">Lu的博客</span></span></div><div class="navbar-menu"><a href="/" class="navbar-menu-item">首页 </a><a href="/archives" class="navbar-menu-item">归档 </a><a href="/tags" class="navbar-menu-item">标签 </a><a href="/categories" class="navbar-menu-item">分类 </a><a class="navbar-menu-item darknavbar" id="dark"><i class="iconfont icon-weather"></i></a> <a class="navbar-menu-item searchnavbar" id="search"><i class="iconfont icon-search" style="font-size:1.2rem;font-weight:400"></i></a></div></nav><div id="local-search" style="display:none"><input class="navbar-menu-item" id="search-input" placeholder="请输入搜索内容..."><div id="search-content"></div></div><div class="section-wrap"><div class="container"><div class="columns"><main class="main-column"><div class="image-wrapper"><img class="image lozad" src="/2021/02/23/docker-compose/docker-compose.jpg" alt="thumbnail" data-src="/2021/02/23/docker-compose/docker-compose.jpg" srcset="/2021/02/23/docker-compose/docker-compose.jpg"></div><article class="card card-content"><header><h1 class="post-title">Docker Compose</h1></header><div class="post-meta post-show-meta"><time datetime="2021-02-23T11:55:00.000Z"><i class="iconfont icon-calendar" style="margin-right:2px"></i> <span>2021-02-23</span> </time><span class="dot"></span> <a href="/categories/Docker/" class="post-meta-link">Docker</a> <span class="dot"></span> <span>4k 字</span></div><div class="post-meta post-show-meta" style="margin-top:-10px"><div style="display:flex;align-items:center"><i class="iconfont icon-biaoqian" style="margin-right:2px;font-size:1.15rem"></i> <a href="/tags/docker/" class="post-meta-link">docker</a></div></div><div class="post-content" id="section"><p>docker compose 用于定义和运行多容器 Docker 应用程序的工具。通过 Compose，您可以使用 YML 文件来配置应用程序需要的所有服务。然后，使用一个命令，就可以从 YML 文件配置中创建并启动所有服务。</p><p>Compose 使用的三个步骤：</p><ul><li>使用 Dockerfile 定义应用程序的环境。</li><li>使用 docker-compose.yml 定义构成应用程序的服务，这样它们可以在隔离环境中一起运行。</li><li>最后，执行 docker-compose up 命令来启动并运行整个应用程序。</li></ul><p>docker-compose.yml 的配置案例:</p><pre class="highlight"><span class="line"><span class="comment"># yaml 配置实例</span></span><br><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&quot;5000:5000&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">.:/code</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">logvolume01:/var/log</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis</span></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">logvolume01:</span> &#123;&#125;</span><br></pre><br><h2 id="Docker-compose-安装"><a href="#Docker-compose-安装" class="headerlink" title="Docker-compose 安装"></a>Docker-compose 安装</h2><h3 id="Linux-平台上安装"><a href="#Linux-平台上安装" class="headerlink" title="Linux 平台上安装"></a>Linux 平台上安装</h3><h4 id="Debian-Ubuntu"><a href="#Debian-Ubuntu" class="headerlink" title="Debian/Ubuntu"></a>Debian/Ubuntu</h4><p>Debian/Ubuntu 安装命令为：</p><pre class="highlight"><span class="line">apt-get install -y docker-compose</span><br></pre><h4 id="Centos-RedHat"><a href="#Centos-RedHat" class="headerlink" title="Centos/RedHat"></a>Centos/RedHat</h4><p>如果你使用的系统是 Centos/RedHat 安装命令为：</p><pre class="highlight"><span class="line">pip install docker-compose</span><br></pre><br><h3 id="Windows-macOS-平台上安装"><a href="#Windows-macOS-平台上安装" class="headerlink" title="Windows/macOS 平台上安装"></a>Windows/macOS 平台上安装</h3><p>Windows/macOS 的 Docker 桌面版和 Docker Toolbox 已经包括 Compose 和其他 Docker 应用程序，因此用户不需要单独安装 Compose。</p><br><h2 id="Docker-compose-常用命令"><a href="#Docker-compose-常用命令" class="headerlink" title="Docker-compose 常用命令"></a>Docker-compose 常用命令</h2><h3 id="Docker-compose命令格式"><a href="#Docker-compose命令格式" class="headerlink" title="Docker-compose命令格式"></a>Docker-compose命令格式</h3><pre class="highlight"><span class="line">docker-compose [-f &lt;arg&gt;...] [options] [COMMAND] [ARGS...]</span><br></pre><ul><li>-f –file FILE指定Compose模板文件，默认为docker-compose.yml</li><li>-p –project-name NAME 指定项目名称，默认使用当前所在目录为项目名</li><li>–verbose 输出更多调试信息</li><li>-v，-version 打印版本并退出</li><li>–log-level LEVEL 定义日志等级(DEBUG, INFO, WARNING, ERROR, CRITICAL)</li></ul><br><h3 id="docker-compose-up"><a href="#docker-compose-up" class="headerlink" title="docker-compose up"></a>docker-compose up</h3><p>启动应用程序</p><pre class="highlight"><span class="line">docker-compose up [options] [--scale SERVICE=NUM...] [SERVICE...]</span><br></pre><ul><li>-d 在后台运行服务容器</li><li>-no-color 不是有颜色来区分不同的服务的控制输出</li><li>-no-deps 不启动服务所链接的容器</li><li>–force-recreate 强制重新创建容器，不能与-no-recreate同时使用</li><li>–no-recreate 如果容器已经存在，则不重新创建，不能与–force-recreate同时使用</li><li>–no-build 不自动构建缺失的服务镜像</li><li>–build 在启动容器前构建服务镜像</li><li>–abort-on-container-exit 停止所有容器，如果任何一个容器被停止，不能与-d同时使用</li><li>-t, –timeout TIMEOUT 停止容器时候的超时（默认为10秒）</li><li>–remove-orphans 删除服务中没有在compose文件中定义的容器</li></ul><br><h3 id="docker-compose-ps"><a href="#docker-compose-ps" class="headerlink" title="docker-compose ps"></a>docker-compose ps</h3><p>列出项目中所有的容器</p><pre class="highlight"><span class="line">docker-compose  ps [options] [SERVICE...]</span><br></pre><br><h3 id="docker-compose-stop"><a href="#docker-compose-stop" class="headerlink" title="docker-compose stop"></a>docker-compose stop</h3><p>停止正在运行的容器</p><pre class="highlight"><span class="line">docker-compose stop [options] [SERVICE...]</span><br></pre><ul><li>-t, –timeout TIMEOUT 停止容器时候的超时（默认为10秒）</li></ul><p>停止运行的容器，可以通过docker-compose start 再次启动</p><br><h3 id="docker-compose-h"><a href="#docker-compose-h" class="headerlink" title="docker-compose -h"></a>docker-compose -h</h3><p>查看帮助</p><br><h3 id="docker-compose-down"><a href="#docker-compose-down" class="headerlink" title="docker-compose down"></a>docker-compose down</h3><p>停止和删除容器、网络、卷、镜像</p><pre class="highlight"><span class="line">docker-compose down [options]</span><br></pre><ul><li>–rmi type，删除镜像，类型必须是：all，删除compose文件中定义的所有镜像；local，删除镜像名为空的镜像</li><li>-v, –volumes，删除已经在compose文件中定义的和匿名的附在容器上的数据卷</li><li>–remove-orphans，删除服务中没有在compose中定义的容器</li></ul><br><h3 id="docker-compose-logs"><a href="#docker-compose-logs" class="headerlink" title="docker-compose logs"></a>docker-compose logs</h3><p>查看服务容器的输出</p><pre class="highlight"><span class="line">docker-compose logs [options] [SERVICE...]</span><br></pre><ul><li>-f 跟踪日志输出</li></ul><p>默认情况下，docker-compose将对不同的服务输出使用不同的颜色来区分。可以通过–no-color来关闭颜色。</p><br><h3 id="docker-compose-bulid"><a href="#docker-compose-bulid" class="headerlink" title="docker-compose bulid"></a>docker-compose bulid</h3><p>构建（重新构建）项目中的服务容器</p><pre class="highlight"><span class="line">docker-compose build [options] [--build-arg key=val...] [SERVICE...]</span><br></pre><ul><li>–compress 通过gzip压缩构建上下环境</li><li>–force-rm 删除构建过程中的临时容器</li><li>–no-cache 构建镜像过程中不使用缓存</li><li>–pull 始终尝试通过拉取操作来获取更新版本的镜像</li><li>-m, –memory MEM为构建的容器设置内存大小</li><li>–build-arg key=val为服务设置build-time变量</li><li>服务容器一旦构建后，将会带上一个标记名。可以随时在项目目录下运行docker-compose build来重新构建服务</li></ul><br><h3 id="docker-compose-pull"><a href="#docker-compose-pull" class="headerlink" title="docker-compose pull"></a>docker-compose pull</h3><p>拉取服务依赖的镜像</p><pre class="highlight"><span class="line">docker-compose pull [options] [SERVICE...]</span><br></pre><ul><li>–ignore-pull-failures，忽略拉取镜像过程中的错误</li><li>–parallel，多个镜像同时拉取</li><li>–quiet，拉取镜像过程中不打印进度信息</li></ul><br><h3 id="docker-compose-restart"><a href="#docker-compose-restart" class="headerlink" title="docker-compose restart"></a>docker-compose restart</h3><p>重启项目中的服务</p><pre class="highlight"><span class="line">docker-compose restart [options] [SERVICE...]</span><br></pre><ul><li>-t, –timeout TIMEOUT，指定重启前停止容器的超时（默认为10秒）</li></ul><br><h3 id="docker-compose-rm"><a href="#docker-compose-rm" class="headerlink" title="docker-compose rm"></a>docker-compose rm</h3><p>删除所有（停止状态的）服务容器,但推荐先执行docker-compose stop命令来停止容器。</p><pre class="highlight"><span class="line">docker-compose rm [options] [SERVICE...]</span><br></pre><ul><li>–f, –force，强制直接删除，包括非停止状态的容器</li><li>-v，删除容器所挂载的数据卷</li></ul><br><h3 id="docker-compose-start"><a href="#docker-compose-start" class="headerlink" title="docker-compose start"></a>docker-compose start</h3><p>启动已经存在的服务容器</p><pre class="highlight"><span class="line">docker-compose start [SERVICE...]</span><br></pre><br><h3 id="docker-compose-run"><a href="#docker-compose-run" class="headerlink" title="docker-compose run"></a>docker-compose run</h3><p>在指定服务上执行一个命令</p><pre class="highlight"><span class="line">docker-compose run [options] [-v VOLUME...] [-p PORT...] [-e KEY=VAL...] SERVICE [COMMAND] [ARGS...]</span><br></pre><br><h3 id="docker-compose-scale"><a href="#docker-compose-scale" class="headerlink" title="docker-compose scale"></a>docker-compose scale</h3><p>设置指定服务运行的容器个数。通过service=num的参数来设置数量</p><pre class="highlight"><span class="line">docker-compose scale web=3 db=2</span><br></pre><br><h3 id="docker-compose-pause"><a href="#docker-compose-pause" class="headerlink" title="docker-compose pause"></a>docker-compose pause</h3><p>暂停一个服务容器</p><pre class="highlight"><span class="line">docker-compose pause [SERVICE...]</span><br></pre><br><h3 id="docker-compose-kill"><a href="#docker-compose-kill" class="headerlink" title="docker-compose kill"></a>docker-compose kill</h3><p>通过发送SIGKILL信号来强制停止服务容器</p><pre class="highlight"><span class="line">docker-compose kill [options] [SERVICE...]</span><br></pre><br><h3 id="docker-compose-config"><a href="#docker-compose-config" class="headerlink" title="docker-compose config"></a>docker-compose config</h3><p>验证并查看compose文件配置</p><pre class="highlight"><span class="line">docker-compose config [options]</span><br></pre><ul><li>–resolve-image-digests 将镜像标签标记为摘要</li><li>-q, –quiet 只验证配置，不输出。 当配置正确时，不输出任何内容，当文件配置错误，输出错误信息</li><li>–services 打印服务名，一行一个</li><li>–volumes 打印数据卷名，一行一个</li></ul><br><h3 id="docker-compose-create"><a href="#docker-compose-create" class="headerlink" title="docker-compose create"></a>docker-compose create</h3><p>为服务创建容器</p><pre class="highlight"><span class="line">docker-compose create [options] [SERVICE...]</span><br></pre><ul><li>–force-recreate：重新创建容器，即使配置和镜像没有改变，不兼容–no-recreate参数</li><li>–no-recreate：如果容器已经存在，不需要重新创建，不兼容–force-recreate参数</li><li>–no-build：不创建镜像，即使缺失</li><li>–build：创建容器前，生成镜像</li></ul><br><h3 id="docker-compose-exec"><a href="#docker-compose-exec" class="headerlink" title="docker-compose exec"></a>docker-compose exec</h3><p>在运行的容器中执行命令</p><pre class="highlight"><span class="line">docker-compose exec [options] SERVICE COMMAND [ARGS...]</span><br></pre><ul><li>-d 分离模式，后台运行命令。</li><li>–privileged 获取特权。</li><li>–user USER 指定运行的用户。</li><li>-T 禁用分配TTY，默认docker-compose exec分配TTY。</li><li>–index=index，当一个服务拥有多个容器时，可通过该参数登陆到该服务下的任何服务，例如：docker-compose exec –index=1 web /bin/bash ，web服务中包含多个容器</li></ul><br><h3 id="docker-compose-port"><a href="#docker-compose-port" class="headerlink" title="docker-compose port"></a>docker-compose port</h3><p>显示某个容器端口所映射的公共端口</p><pre class="highlight"><span class="line">docker-compose port [options] SERVICE PRIVATE_PORT</span><br></pre><ul><li>–protocol=proto，指定端口协议，TCP（默认值）或者UDP</li><li>–index=index，如果同意服务存在多个容器，指定命令对象容器的序号（默认为1）</li></ul><br><h3 id="docker-compose-push"><a href="#docker-compose-push" class="headerlink" title="docker-compose push"></a>docker-compose push</h3><p>推送服务依的镜像</p><pre class="highlight"><span class="line">docker-compose push [options] [SERVICE...]</span><br></pre><ul><li>–ignore-push-failures 忽略推送镜像过程中的错误</li></ul><br><h3 id="docker-compose-uppause"><a href="#docker-compose-uppause" class="headerlink" title="docker-compose uppause"></a>docker-compose uppause</h3><p>恢复处于暂停状态中的服务</p><pre class="highlight"><span class="line">docker-compose unpause [SERVICE...]</span><br></pre><br><h2 id="yml-配置指令参考"><a href="#yml-配置指令参考" class="headerlink" title="yml 配置指令参考"></a>yml 配置指令参考</h2><h3 id="version"><a href="#version" class="headerlink" title="version"></a>version</h3><p>指定本 yml 依从的 compose 哪个版本制定的。</p><br><h3 id="build"><a href="#build" class="headerlink" title="build"></a>build</h3><p>指定为构建镜像上下文路径：</p><p>例如 webapp 服务，指定为从上下文路径 ./dir/Dockerfile 所构建的镜像：</p><pre class="highlight"><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.7&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">webapp:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./dir</span></span><br></pre><p>或者，作为具有在上下文指定的路径的对象，以及可选的 Dockerfile 和 args：</p><pre class="highlight"><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.7&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">webapp:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./dir</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile-alternate</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="attr">buildno:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&quot;com.example.description=Accounting webapp&quot;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&quot;com.example.department=Finance&quot;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&quot;com.example.label-with-empty-value&quot;</span></span><br><span class="line">      <span class="attr">target:</span> <span class="string">prod</span></span><br></pre><ul><li>context：上下文路径。</li><li>dockerfile：指定构建镜像的 Dockerfile 文件名。</li><li>args：添加构建参数，这是只能在构建过程中访问的环境变量。</li><li>labels：设置构建镜像的标签。</li><li>target：多层构建，可以指定构建哪一层。</li></ul><br><h3 id="cap-add，cap-drop"><a href="#cap-add，cap-drop" class="headerlink" title="cap_add，cap_drop"></a>cap_add，cap_drop</h3><p>添加或删除容器拥有的宿主机的内核功能。</p><pre class="highlight"><span class="line"><span class="attr">cap_add:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ALL</span> <span class="comment"># 开启全部权限</span></span><br><span class="line"></span><br><span class="line"><span class="attr">cap_drop:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">SYS_PTRACE</span> <span class="comment"># 关闭 ptrace权限</span></span><br></pre><br><h3 id="cgroup-parent"><a href="#cgroup-parent" class="headerlink" title="cgroup_parent"></a>cgroup_parent</h3><p>为容器指定父 cgroup 组，意味着将继承该组的资源限制。</p><pre class="highlight"><span class="line"><span class="attr">cgroup_parent:</span> <span class="string">m-executor-abcd</span></span><br></pre><br><h3 id="command"><a href="#command" class="headerlink" title="command"></a>command</h3><p>覆盖容器启动的默认命令。</p><pre class="highlight"><span class="line"><span class="attr">command:</span> [<span class="string">&quot;bundle&quot;</span>, <span class="string">&quot;exec&quot;</span>, <span class="string">&quot;thin&quot;</span>, <span class="string">&quot;-p&quot;</span>, <span class="string">&quot;3000&quot;</span>]</span><br></pre><br><h3 id="container-name"><a href="#container-name" class="headerlink" title="container_name"></a>container_name</h3><p>指定自定义容器名称，而不是生成的默认名称。</p><pre class="highlight"><span class="line"><span class="attr">container_name:</span> <span class="string">my-web-container</span></span><br></pre><br><h3 id="depends-on"><a href="#depends-on" class="headerlink" title="depends_on"></a>depends_on</h3><p>设置依赖关系。</p><p>docker-compose up ：以依赖性顺序启动服务。在以下示例中，先启动 db 和 redis ，才会启动 web。<br>docker-compose up SERVICE ：自动包含 SERVICE 的依赖项。在以下示例中，docker-compose up web 还将创建并启动 db 和 redis。<br>docker-compose stop ：按依赖关系顺序停止服务。在以下示例中，web 在 db 和 redis 之前停止。</p><pre class="highlight"><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.7&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">postgres</span></span><br></pre><p>注意：web 服务不会等待 redis db 完全启动 之后才启动。</p><br><h3 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h3><p>指定与服务的部署和运行有关的配置。只在 swarm 模式下才会有用。</p><pre class="highlight"><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.7&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis:alpine</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="string">mode：replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">6</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">dnsrr</span></span><br><span class="line">      <span class="attr">labels:</span> </span><br><span class="line">        <span class="attr">description:</span> <span class="string">&quot;This redis service label&quot;</span></span><br><span class="line">      <span class="attr">resources:</span></span><br><span class="line">        <span class="attr">limits:</span></span><br><span class="line">          <span class="attr">cpus:</span> <span class="string">&#x27;0.50&#x27;</span></span><br><span class="line">          <span class="attr">memory:</span> <span class="string">50M</span></span><br><span class="line">        <span class="attr">reservations:</span></span><br><span class="line">          <span class="attr">cpus:</span> <span class="string">&#x27;0.25&#x27;</span></span><br><span class="line">          <span class="attr">memory:</span> <span class="string">20M</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">120s</span></span><br></pre><p>可以选参数：</p><ul><li>endpoint_mode：访问集群服务的方式。</li></ul><pre class="highlight"><span class="line"><span class="attr">endpoint_mode:</span> <span class="string">vip</span> </span><br><span class="line"><span class="comment"># Docker 集群服务一个对外的虚拟 ip。所有的请求都会通过这个虚拟 ip 到达集群服务内部的机器。</span></span><br><span class="line"><span class="attr">endpoint_mode:</span> <span class="string">dnsrr</span></span><br><span class="line"><span class="comment"># DNS 轮询（DNSRR）。所有的请求会自动轮询获取到集群 ip 列表中的一个 ip 地址。</span></span><br></pre><ul><li>labels：在服务上设置标签。可以用容器上的 labels（跟 deploy 同级的配置） 覆盖 deploy 下的 labels。</li><li>mode：指定服务提供的模式。<ul><li>replicated：复制服务，复制指定服务到集群的机器上。</li><li>global：全局服务，服务将部署至集群的每个节点。</li></ul></li><li>replicas：mode 为 replicated 时，需要使用此参数配置具体运行的节点数量。</li><li>resources：配置服务器资源使用的限制，例如上例子，配置 redis 集群运行需要的 cpu 的百分比 和 内存的占用。避免占用资源过高出现异常。</li><li>restart_policy：配置如何在退出容器时重新启动容器。<ul><li>condition：可选 none，on-failure 或者 any（默认值：any）。</li><li>delay：设置多久之后重启（默认值：0）。</li><li>max_attempts：尝试重新启动容器的次数，超出次数，则不再尝试（默认值：一直重试）。</li><li>window：设置容器重启超时时间（默认值：0）。</li></ul></li><li>rollback_config：配置在更新失败的情况下应如何回滚服务。<ul><li>parallelism：一次要回滚的容器数。如果设置为0，则所有容器将同时回滚。</li><li>delay：每个容器组回滚之间等待的时间（默认为0s）。</li><li>failure_action：如果回滚失败，该怎么办。其中一个 continue 或者 pause（默认pause）。</li><li>monitor：每个容器更新后，持续观察是否失败了的时间 (ns|us|ms|s|m|h)（默认为0s）。</li><li>max_failure_ratio：在回滚期间可以容忍的故障率（默认为0）。</li><li>order：回滚期间的操作顺序。其中一个 stop-first（串行回滚），或者 start-first（并行回滚）（默认 stop-first ）。</li></ul></li><li>update_config：配置应如何更新服务，对于配置滚动更新很有用。<ul><li>parallelism：一次更新的容器数。</li><li>delay：在更新一组容器之间等待的时间。</li><li>failure_action：如果更新失败，该怎么办。其中一个 continue，rollback 或者pause （默认：pause）。</li><li>monitor：每个容器更新后，持续观察是否失败了的时间 (ns|us|ms|s|m|h)（默认为0s）。</li><li>max_failure_ratio：在更新过程中可以容忍的故障率。</li><li>order：回滚期间的操作顺序。其中一个 stop-first（串行回滚），或者 start-first（并行回滚）（默认stop-first）。</li></ul></li></ul><br><h3 id="devices"><a href="#devices" class="headerlink" title="devices"></a>devices</h3><p>指定设备映射列表。</p><pre class="highlight"><span class="line"><span class="attr">devices:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;/dev/ttyUSB0:/dev/ttyUSB0&quot;</span></span><br></pre><br><h3 id="dns"><a href="#dns" class="headerlink" title="dns"></a>dns</h3><p>自定义 DNS 服务器，可以是单个值或列表的多个值。</p><pre class="highlight"><span class="line"><span class="attr">dns:</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dns:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">9.9</span><span class="number">.9</span><span class="number">.9</span></span><br></pre><br><h3 id="dns-search"><a href="#dns-search" class="headerlink" title="dns_search"></a>dns_search</h3><p>自定义 DNS 搜索域。可以是单个值或列表。</p><pre class="highlight"><span class="line"><span class="attr">dns_search:</span> <span class="string">example.com</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dns_search:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">dc1.example.com</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">dc2.example.com</span></span><br></pre><br><h3 id="entrypoint"><a href="#entrypoint" class="headerlink" title="entrypoint"></a>entrypoint</h3><p>覆盖容器默认的 entrypoint。</p><pre class="highlight"><span class="line"><span class="attr">entrypoint:</span> <span class="string">/code/entrypoint.sh</span></span><br><span class="line"></span><br><span class="line"><span class="attr">entrypoint:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">php</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">-d</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">zend_extension=/usr/local/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">-d</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">memory_limit=-1</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">vendor/bin/phpunit</span></span><br></pre><br><h3 id="env-file"><a href="#env-file" class="headerlink" title="env_file"></a>env_file</h3><p>从文件添加环境变量。可以是单个值或列表的多个值。</p><pre class="highlight"><span class="line"><span class="attr">env_file:</span> <span class="string">.env</span></span><br><span class="line"></span><br><span class="line"><span class="attr">env_file:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./common.env</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./apps/web.env</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/opt/secrets.env</span></span><br></pre><br><h3 id="environment"><a href="#environment" class="headerlink" title="environment"></a>environment</h3><p>添加环境变量。您可以使用数组或字典、任何布尔值，布尔值需要用引号引起来，以确保 YML 解析器不会将其转换为 True 或 False。</p><pre class="highlight"><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="attr">RACK_ENV:</span> <span class="string">development</span></span><br><span class="line">  <span class="attr">SHOW:</span> <span class="string">&#x27;true&#x27;</span></span><br></pre><br><h3 id="expose"><a href="#expose" class="headerlink" title="expose"></a>expose</h3><p>暴露端口，但不映射到宿主机，只被连接的服务访问。</p><p>仅可以指定内部端口为参数：</p><pre class="highlight"><span class="line"><span class="attr">expose:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;3000&quot;</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;8000&quot;</span></span><br></pre><br><h3 id="ports"><a href="#ports" class="headerlink" title="ports"></a>ports</h3><p>对外暴露的端口定义，和 expose 对应</p><pre class="highlight"><span class="line"><span class="attr">ports:</span>   <span class="comment"># 暴露端口信息  - &quot;宿主机端口:容器暴露端口&quot;</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;8763:8763&quot;</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;8763:8763&quot;</span></span><br></pre><br><h3 id="extra-hosts"><a href="#extra-hosts" class="headerlink" title="extra_hosts"></a>extra_hosts</h3><p>添加主机名映射。类似 docker client –add-host。</p><pre class="highlight"><span class="line"><span class="attr">extra_hosts:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;somehost:162.242.195.82&quot;</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;otherhost:50.31.209.229&quot;</span></span><br></pre><p>以上会在此服务的内部容器中 /etc/hosts 创建一个具有 ip 地址和主机名的映射关系：</p><pre class="highlight"><span class="line">162.242.195.82  somehost</span><br><span class="line">50.31.209.229   otherhost</span><br></pre><br><h3 id="healthcheck"><a href="#healthcheck" class="headerlink" title="healthcheck"></a>healthcheck</h3><p>用于检测 docker 服务是否健康运行。</p><pre class="highlight"><span class="line"><span class="attr">healthcheck:</span></span><br><span class="line">  <span class="attr">test:</span> [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;curl&quot;</span>, <span class="string">&quot;-f&quot;</span>, <span class="string">&quot;http://localhost&quot;</span>] <span class="comment"># 设置检测程序</span></span><br><span class="line">  <span class="attr">interval:</span> <span class="string">1m30s</span> <span class="comment"># 设置检测间隔</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="string">10s</span> <span class="comment"># 设置检测超时时间</span></span><br><span class="line">  <span class="attr">retries:</span> <span class="number">3</span> <span class="comment"># 设置重试次数</span></span><br><span class="line">  <span class="attr">start_period:</span> <span class="string">40s</span> <span class="comment"># 启动后，多少秒开始启动检测程序</span></span><br></pre><br><h3 id="image"><a href="#image" class="headerlink" title="image"></a>image</h3><p>指定容器运行的镜像。以下格式都可以：</p><pre class="highlight"><span class="line"><span class="attr">image:</span> <span class="string">redis</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">ubuntu:14.04</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">tutum/influxdb</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">example-registry.com:4000/postgresql</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">a4bc65fd</span> <span class="comment"># 镜像id</span></span><br></pre><br><h3 id="logging"><a href="#logging" class="headerlink" title="logging"></a>logging</h3><p>服务的日志记录配置。</p><p>driver：指定服务容器的日志记录驱动程序，默认值为json-file。有以下三个选项</p><pre class="highlight"><span class="line"><span class="attr">driver:</span> <span class="string">&quot;json-file&quot;</span></span><br><span class="line"><span class="attr">driver:</span> <span class="string">&quot;syslog&quot;</span></span><br><span class="line"><span class="attr">driver:</span> <span class="string">&quot;none&quot;</span></span><br></pre><p>仅在 json-file 驱动程序下，可以使用以下参数，限制日志得数量和大小。</p><pre class="highlight"><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">driver:</span> <span class="string">json-file</span></span><br><span class="line">  <span class="attr">options:</span></span><br><span class="line">    <span class="attr">max-size:</span> <span class="string">&quot;200k&quot;</span> <span class="comment"># 单个文件大小为200k</span></span><br><span class="line">    <span class="attr">max-file:</span> <span class="string">&quot;10&quot;</span> <span class="comment"># 最多10个文件</span></span><br></pre><p>当达到文件限制上限，会自动删除旧得文件。</p><p>syslog 驱动程序下，可以使用 syslog-address 指定日志接收地址。</p><pre class="highlight"><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">driver:</span> <span class="string">syslog</span></span><br><span class="line">  <span class="attr">options:</span></span><br><span class="line">    <span class="attr">syslog-address:</span> <span class="string">&quot;tcp://192.168.0.42:123&quot;</span></span><br></pre><br><h3 id="network-mode"><a href="#network-mode" class="headerlink" title="network_mode"></a>network_mode</h3><p>设置网络模式。</p><pre class="highlight"><span class="line"><span class="attr">network_mode:</span> <span class="string">&quot;bridge&quot;</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">&quot;host&quot;</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">&quot;none&quot;</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">&quot;service:[service name]&quot;</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">&quot;container:[container name/id]&quot;</span></span><br></pre><br><h3 id="networks"><a href="#networks" class="headerlink" title="networks"></a>networks</h3><p>配置容器连接的网络，引用顶级 networks 下的条目 。</p><pre class="highlight"><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">some-service:</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="attr">some-network:</span></span><br><span class="line">        <span class="attr">aliases:</span></span><br><span class="line">         <span class="bullet">-</span> <span class="string">alias1</span></span><br><span class="line">      <span class="attr">other-network:</span></span><br><span class="line">        <span class="attr">aliases:</span></span><br><span class="line">         <span class="bullet">-</span> <span class="string">alias2</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">some-network:</span></span><br><span class="line">    <span class="comment"># Use a custom driver</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">custom-driver-1</span></span><br><span class="line">  <span class="attr">other-network:</span></span><br><span class="line">    <span class="comment"># Use a custom driver which takes special options</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">custom-driver-2</span></span><br></pre><p>aliases ：同一网络上的其他容器可以使用服务名称或此别名来连接到对应容器的服务。</p><br><h3 id="restart"><a href="#restart" class="headerlink" title="restart"></a>restart</h3><ul><li>no：是默认的重启策略，在任何情况下都不会重启容器。</li><li>always：容器总是重新启动。<br>on-failure：在容器非正常退出时（退出状态非0），才会重启容器。<br>unless-stopped：在容器退出时总是重启容器，但是不考虑在Docker守护进程启动时就已经停止了的容器</li></ul><pre class="highlight"><span class="line"><span class="attr">restart:</span> <span class="string">&quot;no&quot;</span></span><br><span class="line"><span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line"><span class="attr">restart:</span> <span class="string">on-failure</span></span><br><span class="line"><span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br></pre><p>注：swarm 集群模式，请改用restart_policy。</p><br><h3 id="secrets"><a href="#secrets" class="headerlink" title="secrets"></a>secrets</h3><p>存储敏感数据，例如密码：</p><pre class="highlight"><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.1&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mysql:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">mysql</span></span><br><span class="line">  <span class="attr">environment:</span></span><br><span class="line">    <span class="attr">MYSQL_ROOT_PASSWORD_FILE:</span> <span class="string">/run/secrets/my_secret</span></span><br><span class="line">  <span class="attr">secrets:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">my_secret</span></span><br><span class="line"></span><br><span class="line"><span class="attr">secrets:</span></span><br><span class="line">  <span class="attr">my_secret:</span></span><br><span class="line">    <span class="attr">file:</span> <span class="string">./my_secret.txt</span></span><br></pre><br><h3 id="security-opt"><a href="#security-opt" class="headerlink" title="security_opt"></a>security_opt</h3><p>修改容器默认的 schema 标签。</p><pre class="highlight"><span class="line"><span class="string">security-opt：</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">label:user:USER</span>   <span class="comment"># 设置容器的用户标签</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">label:role:ROLE</span>   <span class="comment"># 设置容器的角色标签</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">label:type:TYPE</span>   <span class="comment"># 设置容器的安全策略标签</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">label:level:LEVEL</span>  <span class="comment"># 设置容器的安全等级标签</span></span><br></pre><br><h3 id="stop-grace-period"><a href="#stop-grace-period" class="headerlink" title="stop_grace_period"></a>stop_grace_period</h3><p>指定在容器无法处理 SIGTERM (或者任何 stop_signal 的信号)，等待多久后发送 SIGKILL 信号关闭容器。</p><pre class="highlight"><span class="line"><span class="attr">stop_grace_period:</span> <span class="string">1s</span> <span class="comment"># 等待 1 秒</span></span><br><span class="line"><span class="attr">stop_grace_period:</span> <span class="string">1m30s</span> <span class="comment"># 等待 1 分 30 秒</span></span><br></pre><p>默认的等待时间是 10 秒。</p><br><h3 id="stop-signal"><a href="#stop-signal" class="headerlink" title="stop_signal"></a>stop_signal</h3><p>设置停止容器的替代信号。默认情况下使用 SIGTERM 。</p><p>以下示例，使用 SIGUSR1 替代信号 SIGTERM 来停止容器。</p><pre class="highlight"><span class="line"><span class="attr">stop_signal:</span> <span class="string">SIGUSR1</span></span><br></pre><br><h3 id="sysctls"><a href="#sysctls" class="headerlink" title="sysctls"></a>sysctls</h3><p>设置容器中的内核参数，可以使用数组或字典格式。</p><pre class="highlight"><span class="line"><span class="attr">sysctls:</span></span><br><span class="line">  <span class="attr">net.core.somaxconn:</span> <span class="number">1024</span></span><br><span class="line">  <span class="attr">net.ipv4.tcp_syncookies:</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sysctls:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">net.core.somaxconn=1024</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">net.ipv4.tcp_syncookies=0</span></span><br></pre><br><h3 id="tmpfs"><a href="#tmpfs" class="headerlink" title="tmpfs"></a>tmpfs</h3><p>在容器内安装一个临时文件系统。可以是单个值或列表的多个值。</p><pre class="highlight"><span class="line"><span class="attr">tmpfs:</span> <span class="string">/run</span></span><br><span class="line"></span><br><span class="line"><span class="attr">tmpfs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/run</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/tmp</span></span><br></pre><br><h3 id="ulimits"><a href="#ulimits" class="headerlink" title="ulimits"></a>ulimits</h3><p>覆盖容器默认的 ulimit。</p><pre class="highlight"><span class="line"><span class="attr">ulimits:</span></span><br><span class="line">  <span class="attr">nproc:</span> <span class="number">65535</span></span><br><span class="line">  <span class="attr">nofile:</span></span><br><span class="line">    <span class="attr">soft:</span> <span class="number">20000</span></span><br><span class="line">    <span class="attr">hard:</span> <span class="number">40000</span></span><br></pre><br><h3 id="volumes"><a href="#volumes" class="headerlink" title="volumes"></a>volumes</h3><p>将主机的数据卷或着文件挂载到容器里。</p><pre class="highlight"><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.7&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">postgres:latest</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/localhost/postgres.sock:/var/run/postgres/postgres.sock&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/localhost/data:/var/lib/postgresql/data&quot;</span></span><br></pre></div><div></div></article><div class="nav"><div class="nav-item-prev"><a href="/2021/02/23/docker-machine/" class="nav-link"><i class="iconfont icon-left nav-prev-icon"></i><div><div class="nav-label">上一篇</div><div class="nav-title">Docker Machine</div></div></a></div><div class="nav-item-next"><a href="/2021/02/23/docker-10/" class="nav-link"><div><div class="nav-label">下一篇</div><div class="nav-title">Docker笔记（10）——技巧和秘诀</div></div><i class="iconfont icon-right nav-next-icon"></i></a></div></div><div class="card card-content toc-card" id="mobiletoc"><div class="toc-header"><i class="iconfont icon-menu" style="padding-right:2px"></i>目录</div><ol class="toc"><li class="toc-item toc-level-2"><a href="#Docker-compose-%E5%AE%89%E8%A3%85" class="toc-link"><span class="toc-text">Docker-compose 安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a href="#Linux-%E5%B9%B3%E5%8F%B0%E4%B8%8A%E5%AE%89%E8%A3%85" class="toc-link"><span class="toc-text">Linux 平台上安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a href="#Debian-Ubuntu" class="toc-link"><span class="toc-text">Debian&#x2F;Ubuntu</span></a></li><li class="toc-item toc-level-4"><a href="#Centos-RedHat" class="toc-link"><span class="toc-text">Centos&#x2F;RedHat</span></a></li></ol></li><li class="toc-item toc-level-3"><a href="#Windows-macOS-%E5%B9%B3%E5%8F%B0%E4%B8%8A%E5%AE%89%E8%A3%85" class="toc-link"><span class="toc-text">Windows&#x2F;macOS 平台上安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a href="#Docker-compose-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4" class="toc-link"><span class="toc-text">Docker-compose 常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a href="#Docker-compose%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F" class="toc-link"><span class="toc-text">Docker-compose命令格式</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-up" class="toc-link"><span class="toc-text">docker-compose up</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-ps" class="toc-link"><span class="toc-text">docker-compose ps</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-stop" class="toc-link"><span class="toc-text">docker-compose stop</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-h" class="toc-link"><span class="toc-text">docker-compose -h</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-down" class="toc-link"><span class="toc-text">docker-compose down</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-logs" class="toc-link"><span class="toc-text">docker-compose logs</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-bulid" class="toc-link"><span class="toc-text">docker-compose bulid</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-pull" class="toc-link"><span class="toc-text">docker-compose pull</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-restart" class="toc-link"><span class="toc-text">docker-compose restart</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-rm" class="toc-link"><span class="toc-text">docker-compose rm</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-start" class="toc-link"><span class="toc-text">docker-compose start</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-run" class="toc-link"><span class="toc-text">docker-compose run</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-scale" class="toc-link"><span class="toc-text">docker-compose scale</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-pause" class="toc-link"><span class="toc-text">docker-compose pause</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-kill" class="toc-link"><span class="toc-text">docker-compose kill</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-config" class="toc-link"><span class="toc-text">docker-compose config</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-create" class="toc-link"><span class="toc-text">docker-compose create</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-exec" class="toc-link"><span class="toc-text">docker-compose exec</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-port" class="toc-link"><span class="toc-text">docker-compose port</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-push" class="toc-link"><span class="toc-text">docker-compose push</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-uppause" class="toc-link"><span class="toc-text">docker-compose uppause</span></a></li></ol></li><li class="toc-item toc-level-2"><a href="#yml-%E9%85%8D%E7%BD%AE%E6%8C%87%E4%BB%A4%E5%8F%82%E8%80%83" class="toc-link"><span class="toc-text">yml 配置指令参考</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a href="#version" class="toc-link"><span class="toc-text">version</span></a></li><li class="toc-item toc-level-3"><a href="#build" class="toc-link"><span class="toc-text">build</span></a></li><li class="toc-item toc-level-3"><a href="#cap-add%EF%BC%8Ccap-drop" class="toc-link"><span class="toc-text">cap_add，cap_drop</span></a></li><li class="toc-item toc-level-3"><a href="#cgroup-parent" class="toc-link"><span class="toc-text">cgroup_parent</span></a></li><li class="toc-item toc-level-3"><a href="#command" class="toc-link"><span class="toc-text">command</span></a></li><li class="toc-item toc-level-3"><a href="#container-name" class="toc-link"><span class="toc-text">container_name</span></a></li><li class="toc-item toc-level-3"><a href="#depends-on" class="toc-link"><span class="toc-text">depends_on</span></a></li><li class="toc-item toc-level-3"><a href="#deploy" class="toc-link"><span class="toc-text">deploy</span></a></li><li class="toc-item toc-level-3"><a href="#devices" class="toc-link"><span class="toc-text">devices</span></a></li><li class="toc-item toc-level-3"><a href="#dns" class="toc-link"><span class="toc-text">dns</span></a></li><li class="toc-item toc-level-3"><a href="#dns-search" class="toc-link"><span class="toc-text">dns_search</span></a></li><li class="toc-item toc-level-3"><a href="#entrypoint" class="toc-link"><span class="toc-text">entrypoint</span></a></li><li class="toc-item toc-level-3"><a href="#env-file" class="toc-link"><span class="toc-text">env_file</span></a></li><li class="toc-item toc-level-3"><a href="#environment" class="toc-link"><span class="toc-text">environment</span></a></li><li class="toc-item toc-level-3"><a href="#expose" class="toc-link"><span class="toc-text">expose</span></a></li><li class="toc-item toc-level-3"><a href="#ports" class="toc-link"><span class="toc-text">ports</span></a></li><li class="toc-item toc-level-3"><a href="#extra-hosts" class="toc-link"><span class="toc-text">extra_hosts</span></a></li><li class="toc-item toc-level-3"><a href="#healthcheck" class="toc-link"><span class="toc-text">healthcheck</span></a></li><li class="toc-item toc-level-3"><a href="#image" class="toc-link"><span class="toc-text">image</span></a></li><li class="toc-item toc-level-3"><a href="#logging" class="toc-link"><span class="toc-text">logging</span></a></li><li class="toc-item toc-level-3"><a href="#network-mode" class="toc-link"><span class="toc-text">network_mode</span></a></li><li class="toc-item toc-level-3"><a href="#networks" class="toc-link"><span class="toc-text">networks</span></a></li><li class="toc-item toc-level-3"><a href="#restart" class="toc-link"><span class="toc-text">restart</span></a></li><li class="toc-item toc-level-3"><a href="#secrets" class="toc-link"><span class="toc-text">secrets</span></a></li><li class="toc-item toc-level-3"><a href="#security-opt" class="toc-link"><span class="toc-text">security_opt</span></a></li><li class="toc-item toc-level-3"><a href="#stop-grace-period" class="toc-link"><span class="toc-text">stop_grace_period</span></a></li><li class="toc-item toc-level-3"><a href="#stop-signal" class="toc-link"><span class="toc-text">stop_signal</span></a></li><li class="toc-item toc-level-3"><a href="#sysctls" class="toc-link"><span class="toc-text">sysctls</span></a></li><li class="toc-item toc-level-3"><a href="#tmpfs" class="toc-link"><span class="toc-text">tmpfs</span></a></li><li class="toc-item toc-level-3"><a href="#ulimits" class="toc-link"><span class="toc-text">ulimits</span></a></li><li class="toc-item toc-level-3"><a href="#volumes" class="toc-link"><span class="toc-text">volumes</span></a></li></ol></li></ol></div></main><aside class="left-column"><div class="card card-author"><img class="author-img" src="/img/logo.jpg"><p class="author-name">Lujw</p><p class="author-description">写博客主要为了使自己成长更快并便于以后学有所查，其次为了读者可以和我一起进步，一起探讨，达到互利共赢，也希望我的博客内容能够帮助有问题的小伙伴。如果发现不对或不足之处，请您谅解，敬请指教。</p><div class="author-message"><a href="/archives" class="author-posts-count"><span>76</span> <span>文章</span> </a><a href="/categories" class="author-categories-count"><span>24</span> <span>分类</span> </a><a href="/tags" class="author-tags-count"><span>27</span> <span>标签</span></a></div><div class="author-card-society"><div class="author-card-society-icon"><a href="https://github.com/lujw666" rel="noopener" target="_blank"><i class="iconfont society-icon icon-github"></i></a></div><div class="author-card-society-icon"><a href="mailto:ljw18721327472@outlook.com"><i class="iconfont society-icon icon-mail"></i></a></div><div class="author-card-society-icon"><a href="https://lujw666.github.io/2021/02/23/profile/"><i class="iconfont society-icon icon-internet"></i></a></div></div></div><div class="sticky-tablet"><article class="display-when-two-columns spacer"><div class="card card-content toc-card"><div class="toc-header"><i class="iconfont icon-menu" style="padding-right:2px"></i>目录</div><ol class="toc"><li class="toc-item toc-level-2"><a href="#Docker-compose-%E5%AE%89%E8%A3%85" class="toc-link"><span class="toc-text">Docker-compose 安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a href="#Linux-%E5%B9%B3%E5%8F%B0%E4%B8%8A%E5%AE%89%E8%A3%85" class="toc-link"><span class="toc-text">Linux 平台上安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a href="#Debian-Ubuntu" class="toc-link"><span class="toc-text">Debian&#x2F;Ubuntu</span></a></li><li class="toc-item toc-level-4"><a href="#Centos-RedHat" class="toc-link"><span class="toc-text">Centos&#x2F;RedHat</span></a></li></ol></li><li class="toc-item toc-level-3"><a href="#Windows-macOS-%E5%B9%B3%E5%8F%B0%E4%B8%8A%E5%AE%89%E8%A3%85" class="toc-link"><span class="toc-text">Windows&#x2F;macOS 平台上安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a href="#Docker-compose-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4" class="toc-link"><span class="toc-text">Docker-compose 常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a href="#Docker-compose%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F" class="toc-link"><span class="toc-text">Docker-compose命令格式</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-up" class="toc-link"><span class="toc-text">docker-compose up</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-ps" class="toc-link"><span class="toc-text">docker-compose ps</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-stop" class="toc-link"><span class="toc-text">docker-compose stop</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-h" class="toc-link"><span class="toc-text">docker-compose -h</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-down" class="toc-link"><span class="toc-text">docker-compose down</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-logs" class="toc-link"><span class="toc-text">docker-compose logs</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-bulid" class="toc-link"><span class="toc-text">docker-compose bulid</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-pull" class="toc-link"><span class="toc-text">docker-compose pull</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-restart" class="toc-link"><span class="toc-text">docker-compose restart</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-rm" class="toc-link"><span class="toc-text">docker-compose rm</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-start" class="toc-link"><span class="toc-text">docker-compose start</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-run" class="toc-link"><span class="toc-text">docker-compose run</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-scale" class="toc-link"><span class="toc-text">docker-compose scale</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-pause" class="toc-link"><span class="toc-text">docker-compose pause</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-kill" class="toc-link"><span class="toc-text">docker-compose kill</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-config" class="toc-link"><span class="toc-text">docker-compose config</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-create" class="toc-link"><span class="toc-text">docker-compose create</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-exec" class="toc-link"><span class="toc-text">docker-compose exec</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-port" class="toc-link"><span class="toc-text">docker-compose port</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-push" class="toc-link"><span class="toc-text">docker-compose push</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-uppause" class="toc-link"><span class="toc-text">docker-compose uppause</span></a></li></ol></li><li class="toc-item toc-level-2"><a href="#yml-%E9%85%8D%E7%BD%AE%E6%8C%87%E4%BB%A4%E5%8F%82%E8%80%83" class="toc-link"><span class="toc-text">yml 配置指令参考</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a href="#version" class="toc-link"><span class="toc-text">version</span></a></li><li class="toc-item toc-level-3"><a href="#build" class="toc-link"><span class="toc-text">build</span></a></li><li class="toc-item toc-level-3"><a href="#cap-add%EF%BC%8Ccap-drop" class="toc-link"><span class="toc-text">cap_add，cap_drop</span></a></li><li class="toc-item toc-level-3"><a href="#cgroup-parent" class="toc-link"><span class="toc-text">cgroup_parent</span></a></li><li class="toc-item toc-level-3"><a href="#command" class="toc-link"><span class="toc-text">command</span></a></li><li class="toc-item toc-level-3"><a href="#container-name" class="toc-link"><span class="toc-text">container_name</span></a></li><li class="toc-item toc-level-3"><a href="#depends-on" class="toc-link"><span class="toc-text">depends_on</span></a></li><li class="toc-item toc-level-3"><a href="#deploy" class="toc-link"><span class="toc-text">deploy</span></a></li><li class="toc-item toc-level-3"><a href="#devices" class="toc-link"><span class="toc-text">devices</span></a></li><li class="toc-item toc-level-3"><a href="#dns" class="toc-link"><span class="toc-text">dns</span></a></li><li class="toc-item toc-level-3"><a href="#dns-search" class="toc-link"><span class="toc-text">dns_search</span></a></li><li class="toc-item toc-level-3"><a href="#entrypoint" class="toc-link"><span class="toc-text">entrypoint</span></a></li><li class="toc-item toc-level-3"><a href="#env-file" class="toc-link"><span class="toc-text">env_file</span></a></li><li class="toc-item toc-level-3"><a href="#environment" class="toc-link"><span class="toc-text">environment</span></a></li><li class="toc-item toc-level-3"><a href="#expose" class="toc-link"><span class="toc-text">expose</span></a></li><li class="toc-item toc-level-3"><a href="#ports" class="toc-link"><span class="toc-text">ports</span></a></li><li class="toc-item toc-level-3"><a href="#extra-hosts" class="toc-link"><span class="toc-text">extra_hosts</span></a></li><li class="toc-item toc-level-3"><a href="#healthcheck" class="toc-link"><span class="toc-text">healthcheck</span></a></li><li class="toc-item toc-level-3"><a href="#image" class="toc-link"><span class="toc-text">image</span></a></li><li class="toc-item toc-level-3"><a href="#logging" class="toc-link"><span class="toc-text">logging</span></a></li><li class="toc-item toc-level-3"><a href="#network-mode" class="toc-link"><span class="toc-text">network_mode</span></a></li><li class="toc-item toc-level-3"><a href="#networks" class="toc-link"><span class="toc-text">networks</span></a></li><li class="toc-item toc-level-3"><a href="#restart" class="toc-link"><span class="toc-text">restart</span></a></li><li class="toc-item toc-level-3"><a href="#secrets" class="toc-link"><span class="toc-text">secrets</span></a></li><li class="toc-item toc-level-3"><a href="#security-opt" class="toc-link"><span class="toc-text">security_opt</span></a></li><li class="toc-item toc-level-3"><a href="#stop-grace-period" class="toc-link"><span class="toc-text">stop_grace_period</span></a></li><li class="toc-item toc-level-3"><a href="#stop-signal" class="toc-link"><span class="toc-text">stop_signal</span></a></li><li class="toc-item toc-level-3"><a href="#sysctls" class="toc-link"><span class="toc-text">sysctls</span></a></li><li class="toc-item toc-level-3"><a href="#tmpfs" class="toc-link"><span class="toc-text">tmpfs</span></a></li><li class="toc-item toc-level-3"><a href="#ulimits" class="toc-link"><span class="toc-text">ulimits</span></a></li><li class="toc-item toc-level-3"><a href="#volumes" class="toc-link"><span class="toc-text">volumes</span></a></li></ol></li></ol></div></article><article class="card card-content categories-widget"><div class="categories-card"><div class="categories-header"><i class="iconfont icon-fenlei" style="padding-right:2px"></i>分类</div><ul class="category-list"><li class="category-list-item"><a href="/categories/Docker/" class="category-list-link">Docker</a><span class="category-list-count">13</span></li><li class="category-list-item"><a href="/categories/Git/" class="category-list-link">Git</a><span class="category-list-count">11</span></li><li class="category-list-item"><a href="/categories/Markdown/" class="category-list-link">Markdown</a><span class="category-list-count">17</span></li><li class="category-list-item"><a href="/categories/Python/" class="category-list-link">Python</a><span class="category-list-count">2</span></li><li class="category-list-item"><a href="/categories/R/" class="category-list-link">R</a><span class="category-list-count">1</span></li><li class="category-list-item"><a href="/categories/SQL/" class="category-list-link">SQL</a><span class="category-list-count">22</span></li><li class="category-list-item"><a href="/categories/%E4%BB%A3%E8%B0%A2/" class="category-list-link">代谢</a><span class="category-list-count">3</span></li><li class="category-list-item"><a href="/categories/%E7%A7%91%E6%99%AE/" class="category-list-link">科普</a><span class="category-list-count">5</span></li></ul></div></article><article class="card card-content tags-widget"><div class="tags-card"><div class="tags-header"><i class="iconfont icon-biaoqian" style="padding-right:2px"></i>热门标签</div><div class="tags-list"><a href="\tags\其他" title="其他"><div class="tags-list-item">其他</div></a><a href="\tags\markdown" title="markdown"><div class="tags-list-item">markdown</div></a><a href="\tags\简介" title="简介"><div class="tags-list-item">简介</div></a><a href="\tags\hexo" title="hexo"><div class="tags-list-item">hexo</div></a><a href="\tags\blog" title="blog"><div class="tags-list-item">blog</div></a><a href="\tags\git" title="git"><div class="tags-list-item">git</div></a><a href="\tags\github" title="github"><div class="tags-list-item">github</div></a><a href="\tags\gitbook" title="gitbook"><div class="tags-list-item">gitbook</div></a><a href="\tags\docker" title="docker"><div class="tags-list-item">docker</div></a><a href="\tags\安装" title="安装"><div class="tags-list-item">安装</div></a><a href="\tags\swarn" title="swarn"><div class="tags-list-item">swarn</div></a><a href="\tags\mermaid" title="mermaid"><div class="tags-list-item">mermaid</div></a><a href="\tags\空间代谢组" title="空间代谢组"><div class="tags-list-item">空间代谢组</div></a><a href="\tags\reveal.js" title="reveal.js"><div class="tags-list-item">reveal.js</div></a><a href="\tags\gitflow" title="gitflow"><div class="tags-list-item">gitflow</div></a><a href="\tags\sql" title="sql"><div class="tags-list-item">sql</div></a></div></div></article></div></aside><aside class="right-column"><div class="sticky-widescreen"><article class="card card-content toc-card"><div class="toc-header"><i class="iconfont icon-menu" style="padding-right:2px"></i>目录</div><ol class="toc"><li class="toc-item toc-level-2"><a href="#Docker-compose-%E5%AE%89%E8%A3%85" class="toc-link"><span class="toc-text">Docker-compose 安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a href="#Linux-%E5%B9%B3%E5%8F%B0%E4%B8%8A%E5%AE%89%E8%A3%85" class="toc-link"><span class="toc-text">Linux 平台上安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a href="#Debian-Ubuntu" class="toc-link"><span class="toc-text">Debian&#x2F;Ubuntu</span></a></li><li class="toc-item toc-level-4"><a href="#Centos-RedHat" class="toc-link"><span class="toc-text">Centos&#x2F;RedHat</span></a></li></ol></li><li class="toc-item toc-level-3"><a href="#Windows-macOS-%E5%B9%B3%E5%8F%B0%E4%B8%8A%E5%AE%89%E8%A3%85" class="toc-link"><span class="toc-text">Windows&#x2F;macOS 平台上安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a href="#Docker-compose-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4" class="toc-link"><span class="toc-text">Docker-compose 常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a href="#Docker-compose%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F" class="toc-link"><span class="toc-text">Docker-compose命令格式</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-up" class="toc-link"><span class="toc-text">docker-compose up</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-ps" class="toc-link"><span class="toc-text">docker-compose ps</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-stop" class="toc-link"><span class="toc-text">docker-compose stop</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-h" class="toc-link"><span class="toc-text">docker-compose -h</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-down" class="toc-link"><span class="toc-text">docker-compose down</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-logs" class="toc-link"><span class="toc-text">docker-compose logs</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-bulid" class="toc-link"><span class="toc-text">docker-compose bulid</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-pull" class="toc-link"><span class="toc-text">docker-compose pull</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-restart" class="toc-link"><span class="toc-text">docker-compose restart</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-rm" class="toc-link"><span class="toc-text">docker-compose rm</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-start" class="toc-link"><span class="toc-text">docker-compose start</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-run" class="toc-link"><span class="toc-text">docker-compose run</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-scale" class="toc-link"><span class="toc-text">docker-compose scale</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-pause" class="toc-link"><span class="toc-text">docker-compose pause</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-kill" class="toc-link"><span class="toc-text">docker-compose kill</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-config" class="toc-link"><span class="toc-text">docker-compose config</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-create" class="toc-link"><span class="toc-text">docker-compose create</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-exec" class="toc-link"><span class="toc-text">docker-compose exec</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-port" class="toc-link"><span class="toc-text">docker-compose port</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-push" class="toc-link"><span class="toc-text">docker-compose push</span></a></li><li class="toc-item toc-level-3"><a href="#docker-compose-uppause" class="toc-link"><span class="toc-text">docker-compose uppause</span></a></li></ol></li><li class="toc-item toc-level-2"><a href="#yml-%E9%85%8D%E7%BD%AE%E6%8C%87%E4%BB%A4%E5%8F%82%E8%80%83" class="toc-link"><span class="toc-text">yml 配置指令参考</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a href="#version" class="toc-link"><span class="toc-text">version</span></a></li><li class="toc-item toc-level-3"><a href="#build" class="toc-link"><span class="toc-text">build</span></a></li><li class="toc-item toc-level-3"><a href="#cap-add%EF%BC%8Ccap-drop" class="toc-link"><span class="toc-text">cap_add，cap_drop</span></a></li><li class="toc-item toc-level-3"><a href="#cgroup-parent" class="toc-link"><span class="toc-text">cgroup_parent</span></a></li><li class="toc-item toc-level-3"><a href="#command" class="toc-link"><span class="toc-text">command</span></a></li><li class="toc-item toc-level-3"><a href="#container-name" class="toc-link"><span class="toc-text">container_name</span></a></li><li class="toc-item toc-level-3"><a href="#depends-on" class="toc-link"><span class="toc-text">depends_on</span></a></li><li class="toc-item toc-level-3"><a href="#deploy" class="toc-link"><span class="toc-text">deploy</span></a></li><li class="toc-item toc-level-3"><a href="#devices" class="toc-link"><span class="toc-text">devices</span></a></li><li class="toc-item toc-level-3"><a href="#dns" class="toc-link"><span class="toc-text">dns</span></a></li><li class="toc-item toc-level-3"><a href="#dns-search" class="toc-link"><span class="toc-text">dns_search</span></a></li><li class="toc-item toc-level-3"><a href="#entrypoint" class="toc-link"><span class="toc-text">entrypoint</span></a></li><li class="toc-item toc-level-3"><a href="#env-file" class="toc-link"><span class="toc-text">env_file</span></a></li><li class="toc-item toc-level-3"><a href="#environment" class="toc-link"><span class="toc-text">environment</span></a></li><li class="toc-item toc-level-3"><a href="#expose" class="toc-link"><span class="toc-text">expose</span></a></li><li class="toc-item toc-level-3"><a href="#ports" class="toc-link"><span class="toc-text">ports</span></a></li><li class="toc-item toc-level-3"><a href="#extra-hosts" class="toc-link"><span class="toc-text">extra_hosts</span></a></li><li class="toc-item toc-level-3"><a href="#healthcheck" class="toc-link"><span class="toc-text">healthcheck</span></a></li><li class="toc-item toc-level-3"><a href="#image" class="toc-link"><span class="toc-text">image</span></a></li><li class="toc-item toc-level-3"><a href="#logging" class="toc-link"><span class="toc-text">logging</span></a></li><li class="toc-item toc-level-3"><a href="#network-mode" class="toc-link"><span class="toc-text">network_mode</span></a></li><li class="toc-item toc-level-3"><a href="#networks" class="toc-link"><span class="toc-text">networks</span></a></li><li class="toc-item toc-level-3"><a href="#restart" class="toc-link"><span class="toc-text">restart</span></a></li><li class="toc-item toc-level-3"><a href="#secrets" class="toc-link"><span class="toc-text">secrets</span></a></li><li class="toc-item toc-level-3"><a href="#security-opt" class="toc-link"><span class="toc-text">security_opt</span></a></li><li class="toc-item toc-level-3"><a href="#stop-grace-period" class="toc-link"><span class="toc-text">stop_grace_period</span></a></li><li class="toc-item toc-level-3"><a href="#stop-signal" class="toc-link"><span class="toc-text">stop_signal</span></a></li><li class="toc-item toc-level-3"><a href="#sysctls" class="toc-link"><span class="toc-text">sysctls</span></a></li><li class="toc-item toc-level-3"><a href="#tmpfs" class="toc-link"><span class="toc-text">tmpfs</span></a></li><li class="toc-item toc-level-3"><a href="#ulimits" class="toc-link"><span class="toc-text">ulimits</span></a></li><li class="toc-item toc-level-3"><a href="#volumes" class="toc-link"><span class="toc-text">volumes</span></a></li></ol></li></ol></article><article class="card card-content"><div class="recent-posts-card"><div class="recent-posts-header"><i class="iconfont icon-wenzhang_huaban" style="padding-right:2px"></i>最近文章</div><div class="recent-posts-list"><div class="recent-posts-item"><div class="recent-posts-item-title">2021-03-23</div><a href="/2021/03/23/sql-top/"><div class="recent-posts-item-content">SQL语法——SQL TOP, LIMIT, ROWNUM语法</div></a></div><div class="recent-posts-item"><div class="recent-posts-item-title">2021-03-22</div><a href="/2021/03/22/sql-view/"><div class="recent-posts-item-content">SQL笔记——视图</div></a></div><div class="recent-posts-item"><div class="recent-posts-item-title">2021-03-21</div><a href="/2021/03/21/feifan-001/"><div class="recent-posts-item-content">大数据时代</div></a></div><div class="recent-posts-item"><div class="recent-posts-item-title">2021-03-21</div><a href="/2021/03/21/fandeng-002/"><div class="recent-posts-item-content">幸福关系的7段旅程</div></a></div></div></div></article></div></aside></div></div></div></div><footer class="footer"><div class="footer-container"><div><div class="footer-dsc"><span>Copyright © 2021 - 2021 </span>&nbsp; <a href="/" class="footer-link">Lu的博客</a></div></div></div></footer><a class="basebutton" id="scrollbutton" role="button" aria-label="回到顶部"><i class="iconfont button-icon icon-arrowleft"></i> </a><a class="basebutton" id="menubutton" role="button"><i class="iconfont button-icon icon-menu"></i> </a><a class="basebutton" id="popbutton" role="button" aria-label="控制中心"><i class="iconfont button-icon icon-expand"></i> </a><a class="basebutton darkwidget" id="darkbutton" role="button" aria-label="夜色模式"><i class="iconfont button-icon icon-weather"></i> </a><a class="basebutton searchwidget" id="searchbutton" role="button" aria-label="搜索"><i class="iconfont button-icon icon-search"></i></a><script>var addImgLayout=function(){for(var t=document.querySelectorAll(".post-content img"),e=0;e<t.length;e++){var a=document.createElement("a");a.setAttribute("href",t[e].getAttribute("data-src")),a.setAttribute("aria-label","illustration"),a.style.cssText="width: 100%; display: flex; justify-content: center;",t[e].alt&&(a.dataset.caption=t[e].alt),a.dataset.nolink=!0,t[e].before(a),a.append(t[e]);var r=document.createElement("div");r.classList.add("gallery"),a.before(r),r.append(a)}baguetteBox.run(".gallery")}</script><script>loadScript("/js/lib/lightbox/baguetteBox.min.js",addImgLayout)</script><script src="/js/main.js"></script><script>var addLazyload=function(){lozad(".lozad",{load:function(a){a.srcset=a.getAttribute("data-src")},loaded:function(a){a.classList.add("loaded")}}).observe()}</script><script>loadScript("/js/lib/lozad.min.js",addLazyload)</script></body></html>